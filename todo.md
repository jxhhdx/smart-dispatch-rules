# 待办事项

## 功能开发

### 1. 规则状态管理 ✅
- [x] 启用/禁用规则切换
- [x] 状态变更操作按钮
- [x] 使用 Switch 组件进行状态变更
- [x] 状态变更后自动刷新

### 2. 增强规则编辑 ✅
- [x] 支持复杂规则条件配置
  - [x] **筛选类别**（可扩展架构）
    - [x] 骑手：骑手ID、等级、评分、活跃订单数、完成率、工作时长
    - [x] 商家：商家ID、类型、评分、配送范围、VIP状态
    - [x] 订单：订单ID、金额、距离、重量、商品数量、商品类型、紧急程度、时间窗口、客户等级
    - [x] 时间：小时、星期、节假日、高峰时段、时间范围
    - [x] 地理：区域、商圈、特殊地点、天气
  - [x] **可扩展设计**：动态筛选字段注册系统
  - [x] 条件运算符：等于、不等于、大于、大于等于、小于、小于等于、介于、包含、包含文本等
- [x] 嵌套条件组（AND/OR）
- [x] 支持分组的可视化条件构建器
- [x] 快速编辑和高级编辑模式

### 3. 规则复制功能 ✅
- [x] 规则复制按钮
- [x] 复制时自动添加"副本"后缀
- [x] 克隆所有版本和条件
- [x] 复制后自动跳转到编辑页面

### 4. 规则导出功能 ✅
- [x] 单条规则导出为 JSON
- [x] 批量规则导出
- [x] 导出为 CSV 格式
- [x] 带时间戳的文件下载

## 已知问题 / 待修复

### 规则管理优化
- [ ] 规则管理不支持搜索功能
- [ ] 规则管理列表宽度分配不均，需要优化列宽
- [ ] 导出功能交互优化：不应在每个选项后单独添加导出按钮，而应在最上方保留统一的导出按钮，根据当前筛选条件执行导出数据

## 未来增强

### 潜在改进（进行中 🚧）

#### 优先级 P0 - 核心功能
- [ ] 条件模板保存/加载 🚧 **实现中**
  - [ ] 保存当前条件为模板
  - [ ] 从模板列表加载条件
  - [ ] 模板命名和管理
  - [ ] 删除模板
- [ ] 导出为 Excel 格式 🚧 **实现中**
  - [ ] 安装 xlsx 库
  - [ ] 后端导出 Excel API
  - [ ] 前端下载处理
- [ ] 从文件导入规则 🚧 **实现中**
  - [ ] 支持 JSON/Excel 导入
  - [ ] 文件上传组件
  - [ ] 数据验证和预览
  - [ ] 批量导入处理

#### 优先级 P1 - 体验优化
- [ ] 拖拽重新排序条件
  - [ ] 集成 @dnd-kit 或 react-beautiful-dnd
  - [ ] 实现条件项拖拽
  - [ ] 实现条件组拖拽
- [ ] 实时规则效果预览
  - [ ] 模拟数据生成
  - [ ] 规则执行结果展示
  - [ ] 匹配/不匹配高亮

#### 优先级 P2 - 高级功能
- [ ] 规则版本对比
  - [ ] 版本差异算法
  - [ ] 对比视图 UI
  - [ ] 条件增删高亮
- [ ] 可视化规则流程图
  - [ ] 集成 react-flow 或 @antv/g6
  - [ ] 流程图渲染
  - [ ] 节点交互
