# 前端页面测试用例

> Frontend - React + Ant Design 页面测试

---

## 模块概览

| 属性 | 值 |
|-----|---|
| 框架 | React + TypeScript + Ant Design |
| 测试工具 | Vitest + React Testing Library |
| 核心页面 | Login, Users, Roles, Rules, Logs, Dashboard |
| 测试用例数 | 48 |
| 优先级分布 | P0: 18, P1: 18, P2: 12 |

---

## 1. 登录页面 (Login)

### 1.1 功能测试

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| WEB-F-01 | 正常登录 | 输入正确用户名密码 | 登录成功，跳转首页 | P0 |
| WEB-F-02 | 登录-回车提交 | 输入后按回车 | 提交表单 | P1 |
| WEB-F-03 | 语言切换 | 点击语言切换按钮 | 界面语言切换 | P1 |
| WEB-F-04 | 记住登录状态 | 登录后关闭再打开 | 保持登录 | P1 |

### 1.2 表单验证

| ID | 场景 | 输入 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| WEB-V-01 | 空用户名 | 用户名为空 | 显示必填提示 | P0 |
| WEB-V-02 | 空密码 | 密码为空 | 显示必填提示 | P0 |
| WEB-V-03 | 用户名-空格 | `"   "` | 显示必填提示 | P1 |

### 1.3 错误处理

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| WEB-E-01 | 错误密码 | 输入错误密码 | 显示错误提示 | P0 |
| WEB-E-02 | 不存在的用户 | 输入不存在用户 | 显示错误提示 | P0 |
| WEB-E-03 | 网络错误 | 断开网络 | 显示网络错误 | P1 |
| WEB-E-04 | 服务器错误 | 服务器500 | 显示服务错误 | P1 |
| WEB-E-05 | 加载状态 | 提交后 | 按钮显示loading | P1 |

**测试代码示例:**
```tsx
// Login.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { describe, it, expect, vi } from 'vitest'
import Login from './Login'

describe('Login Page', () => {
  // WEB-F-01: 正常登录
  it('should login successfully with valid credentials', async () => {
    render(<Login />)
    
    fireEvent.change(screen.getByPlaceholderText('用户名'), {
      target: { value: 'admin' }
    })
    fireEvent.change(screen.getByPlaceholderText('密码'), {
      target: { value: 'admin123' }
    })
    fireEvent.click(screen.getByText('登录'))
    
    await waitFor(() => {
      expect(window.location.pathname).toBe('/')
    })
  })
  
  // WEB-V-01: 空用户名验证
  it('should show validation error for empty username', async () => {
    render(<Login />)
    fireEvent.click(screen.getByText('登录'))
    
    expect(await screen.findByText('请输入用户名')).toBeInTheDocument()
  })
})
```

---

## 2. 用户管理页面 (Users)

### 2.1 功能测试

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| USR-F-01 | 查看用户列表 | 进入页面 | 加载并显示用户列表 | P0 |
| USR-F-02 | 分页切换 | 点击下一页 | 加载对应页数据 | P0 |
| USR-F-03 | 创建用户 | 点击创建，填写表单 | 用户创建成功 | P0 |
| USR-F-04 | 编辑用户 | 点击编辑，修改信息 | 用户更新成功 | P0 |
| USR-F-05 | 删除用户 | 点击删除，确认 | 用户删除成功 | P0 |
| USR-F-06 | 搜索用户 | 输入关键词 | 筛选显示结果 | P1 |
| USR-F-07 | 刷新列表 | 点击刷新 | 重新加载数据 | P1 |

### 2.2 表单验证

| ID | 场景 | 输入 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| USR-V-01 | 用户名-空 | 空值 | 必填提示 | P0 |
| USR-V-02 | 用户名-短 | "ab" | 长度提示 | P0 |
| USR-V-03 | 邮箱-空 | 空值 | 必填提示 | P0 |
| USR-V-04 | 邮箱-无效 | "invalid" | 格式提示 | P0 |
| USR-V-05 | 密码-空(创建) | 空值 | 必填提示 | P0 |
| USR-V-06 | 密码-短 | "123" | 长度提示 | P0 |

### 2.3 交互测试

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| USR-I-01 | 取消编辑 | 点击取消 | 关闭弹窗，数据不变 | P1 |
| USR-I-02 | 关闭弹窗 | 点击X | 关闭弹窗 | P1 |
| USR-I-03 | 删除确认 | 点击删除 | 显示确认对话框 | P0 |
| USR-I-04 | 取消删除 | 确认框点击取消 | 不执行删除 | P1 |
| USR-I-05 | 表格排序 | 点击表头 | 按列排序 | P2 |
| USR-I-06 | 表格筛选 | 使用筛选器 | 筛选显示 | P2 |

---

## 3. 角色管理页面 (Roles)

### 3.1 功能测试

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| ROLE-F-01 | 查看角色列表 | 进入页面 | 加载显示角色列表 | P0 |
| ROLE-F-02 | 创建角色 | 填写信息+权限 | 角色创建成功 | P0 |
| ROLE-F-03 | 编辑角色 | 修改信息/权限 | 角色更新成功 | P0 |
| ROLE-F-04 | 删除角色 | 确认删除 | 角色删除成功 | P0 |
| ROLE-F-05 | 权限选择 | 勾选权限 | 权限正确关联 | P0 |
| ROLE-F-06 | 全选权限 | 使用全选 | 所有权限选中 | P1 |
| ROLE-F-07 | 取消权限 | 取消勾选 | 权限移除 | P1 |

### 3.2 表单验证

| ID | 场景 | 输入 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| ROLE-V-01 | 角色名-空 | 空值 | 必填提示 | P0 |
| ROLE-V-02 | 角色编码-空 | 空值 | 必填提示 | P0 |
| ROLE-V-03 | 角色编码-无效 | "code@123" | 格式提示 | P0 |
| ROLE-V-04 | 角色编码-重复 | 已存在编码 | 提交后报错 | P1 |

### 3.3 特殊场景

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| ROLE-S-01 | 删除有用户的角色 | 尝试删除 | 显示错误提示 | P0 |
| ROLE-S-02 | 创建时无权限 | 不选权限 | 创建无权限角色 | P1 |

---

## 4. 规则管理页面 (Rules)

### 4.1 功能测试

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| RULE-F-01 | 查看规则列表 | 进入页面 | 加载显示规则列表 | P0 |
| RULE-F-02 | 创建规则 | 填写表单 | 规则创建成功 | P0 |
| RULE-F-03 | 编辑规则 | 修改信息 | 规则更新成功 | P0 |
| RULE-F-04 | 删除规则 | 确认删除 | 规则删除成功 | P0 |
| RULE-F-05 | 查看规则详情 | 点击查看 | 显示详情弹窗 | P1 |
| RULE-F-06 | 创建版本 | 在详情中创建 | 版本创建成功 | P1 |
| RULE-F-07 | 发布版本 | 点击发布 | 版本发布成功 | P1 |
| RULE-F-08 | 回滚版本 | 选择旧版本回滚 | 回滚成功 | P1 |
| RULE-F-09 | 状态标签显示 | 查看列表 | 正确显示状态颜色 | P1 |

### 4.2 表单验证

| ID | 场景 | 输入 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| RULE-V-01 | 规则名-空 | 空值 | 必填提示 | P0 |
| RULE-V-02 | 规则类型-空 | 空值 | 必填提示 | P0 |
| RULE-V-03 | 优先级-负数 | -1 | 校验提示 | P1 |

### 4.3 版本管理

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| RULE-V-10 | 查看版本历史 | 打开详情 | 显示版本列表 | P1 |
| RULE-V-11 | 版本状态显示 | 查看详情 | 正确显示版本状态 | P1 |
| RULE-V-12 | 条件配置 | 编辑条件 | 正确保存条件树 | P2 |
| RULE-V-13 | 动作配置 | 编辑动作 | 正确保存动作 | P2 |

---

## 5. 日志页面 (Logs)

### 5.1 功能测试

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| LOG-F-01 | 查看系统日志 | 进入页面 | 加载显示日志列表 | P0 |
| LOG-F-02 | 查看登录日志 | 切换Tab | 显示登录日志 | P0 |
| LOG-F-03 | 日期筛选 | 选择日期范围 | 筛选结果 | P1 |
| LOG-F-04 | 模块筛选 | 选择模块 | 筛选结果 | P1 |
| LOG-F-05 | 操作筛选 | 选择操作类型 | 筛选结果 | P1 |
| LOG-F-06 | 分页浏览 | 切换页码 | 加载对应数据 | P1 |
| LOG-F-07 | 清空筛选 | 点击重置 | 显示全部数据 | P1 |

### 5.2 显示测试

| ID | 场景 | 预期结果 | 优先级 |
|----|------|---------|--------|
| LOG-D-01 | 长文本截断 | 过长的内容显示... | P1 |
| LOG-D-02 | 时间格式化 | 正确显示日期时间 | P1 |
| LOG-D-03 | 状态颜色 | 成功/失败不同颜色 | P1 |
| LOG-D-04 | 空数据提示 | 无数据时显示提示 | P1 |

---

## 6. 国际化 (i18n)

### 6.1 语言切换

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| I18N-F-01 | 切换中文 | 选择中文 | 界面变中文 | P0 |
| I18N-F-02 | 切换英文 | 选择English | 界面变英文 | P0 |
| I18N-F-03 | 切换日语 | 选择日本語 | 界面变日语 | P1 |
| I18N-F-04 | 切换韩语 | 选择한국어 | 界面变韩语 | P1 |
| I18N-F-05 | 刷新保持 | 切换后刷新 | 保持选择的语言 | P1 |

### 6.2 内容验证

| ID | 场景 | 检查项 | 优先级 |
|----|------|--------|--------|
| I18N-V-01 | 菜单翻译 | 所有菜单已翻译 | P1 |
| I18N-V-02 | 表单验证提示 | 验证信息已翻译 | P1 |
| I18N-V-03 | 表格列名 | 列名已翻译 | P1 |
| I18N-V-04 | 按钮文本 | 按钮已翻译 | P1 |
| I18N-V-05 | 日期时间格式 | 符合语言习惯 | P2 |

---

## 7. 公共组件

### 7.1 布局组件

| ID | 场景 | 操作 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| LAY-F-01 | 侧边栏展开/收起 | 点击切换按钮 | 侧边栏状态切换 | P1 |
| LAY-F-02 | 面包屑导航 | 进入子页面 | 显示正确路径 | P1 |
| LAY-F-03 | 用户信息显示 | 登录后 | 显示用户名 | P1 |
| LAY-F-04 | 退出登录 | 点击退出 | 确认后退出 | P0 |
| LAY-F-05 | 响应式布局 | 调整窗口大小 | 自适应布局 | P2 |

### 7.2 权限控制

| ID | 场景 | 条件 | 预期结果 | 优先级 |
|----|------|------|---------|--------|
| PERM-F-01 | 无权限菜单隐藏 | 用户无权限 | 菜单不显示 | P0 |
| PERM-F-02 | 无权限按钮禁用 | 用户无权限 | 按钮禁用/隐藏 | P0 |
| PERM-F-03 | 越权访问拦截 | 直接访问URL | 403或重定向 | P0 |

---

## 8. 执行清单

### P0 必测项（18个）

- [ ] WEB-F-01 登录成功
- [ ] WEB-V-01~02 登录表单验证
- [ ] WEB-E-01~02 登录错误处理
- [ ] USR-F-01~05 用户管理CRUD
- [ ] USR-V-01~06 用户表单验证
- [ ] USR-I-03 删除确认
- [ ] ROLE-F-01~05 角色管理核心
- [ ] ROLE-V-01~03 角色表单验证
- [ ] RULE-F-01~04 规则管理核心
- [ ] RULE-V-01~02 规则表单验证
- [ ] LOG-F-01~02 日志查看
- [ ] I18N-F-01~02 语言切换
- [ ] PERM-F-01~03 权限控制

---

*文档结束 - 前端页面共48个测试用例*
